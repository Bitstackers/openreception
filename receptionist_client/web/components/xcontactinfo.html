<!DOCTYPE html>

<html>
  <head>
    <link rel="import" href="xboxwithheader.html">
    <link rel="import" href="xcalendarevent.html">
  </head>
  <body>
    <element name="x-contact-info" constructor="ContactInfo" extends="span" apply-author-styles>
      <style scoped>
        .placing {
          position: absolute;
          top: 52%;
          left: 0%;
          height: 48%;
          width: 45%;
        }

        .calendarbox {
          width: 100%;
          padding: 10px;
          height: 150px;
        }

        .container {
          height: 100%;
          width: 100%;
          overflow: auto;
        }

        .datacolumn {
          height: 100%;
          width: 59.9%;
          float: right;
        }

        .infobox {
          height: -webkit-calc(100% - 150px);
          height: -moz-calc(100% - 150px);
          overflow: auto;
          padding: 10px;
        }

        .infobox h5 {
          font-size: 0.9em;
        }

        .infobox table {
          width: 100%;
          border-collapse: collapse;
          font-size: 0.9em;
        }

        .infobox td {
          width: 50%;
          padding: 5px;
          vertical-align: top;
        }

        .infobox td div {
          padding-left: 2px;
        }

        .infobox td div ul {
          list-style-type: none;
        }

        .listcolumn {
          height: 100%;
          width: 39.9%;
          float: left;
        }

        .listcolumn ul {
          height: -webkit-calc(100% - 50px);
          height: -moz-calc(100% - 50px);
          overflow: auto;
        }

        .search {
          width: 100%;
          height: 30px;
          border: solid 2px #ccc;
          padding: 3px;
          font-size: 1.1em;
          border-radius: 3px;
        }

        .searchbox {
          width: 100%;
          padding: 10px;
        }

        .zebra,
        .zebraeven {
          list-style-type: none;
        }

        .zebra li,
        .zebraeven li {
          padding: 5px;
        }

        .zebra li:nth-of-type(odd) {
          background-color: #eee;
        }

        .zebraeven li:nth-of-type(even) {
          background-color: #eee;
        }

        .active {
          border-left: solid 3px red;
        }
      </style>

      <template>
        <x-box-with-header class="placing">
          <span name="boxheader" class="header">
            {{title}}
          </span>

          <div name="boxcontent" class="container">
            <div class="listcolumn">
              <template instantiate="if environment.organization.current.contactList != model.nullContactList">
                <div class="searchbox">
                  <input class="search" type="search" placeholder="{{placeholder}}"/>
                </div>
              </template>

              <ul template iterate="value in environment.organization.current.contactList" class="zebra">
                <template instantiate="if value == contact">
                  <li class="active" id="xcontactinfo_contactid_{{value.id}}" on-click="select($event)">{{value.name}}</li>
                </template>
                <template instantiate="if value != contact">
                  <li id="xcontactinfo_contactid_{{value.id}}" on-click="select($event)">{{value.name}}</li>
                </template>
              </ul>
            </div>

            <div class="datacolumn">
              <template instantiate="if contact != model.nullContact">
                <div class="calendarbox">
                  <x-box-with-header headerfontsize="0.8em" headerpadding="0px 5px 2px 5px">
                    <span name="boxheader">
                      {{calendarTitle}}
                    </span>

                    <div name="boxcontent" class="minibox container">
                      <ul template iterate="value in contact.calendarEventList" class="zebraeven">
                        <template instantiate="if value.active">
                          <li class="active">
                            <x-calendar-event event="{{value}}"></x-calendar-event>
                          </li>
                        </template>
                        <template instantiate="if !value.active">
                          <li>
                            <x-calendar-event event="{{value}}"></x-calendar-event>
                          </li>
                        </template>
                      </ul>
                    </div>
                  </x-box-with-header>
                </div>

                <div class="infobox">
                  <table>
                    <tr>
                      <td>
                        <h5>Arbejdstider</h5>
                        <div>
                          <ul template iterate="value in contact.workHoursList">
                            <li>{{value}}</li>
                          </ul>
                        </div>
                      </td>
                      <td>
                        <h5>Kald</h5>
                        <div>
                          <ul template iterate="value in contact.handlingList">
                            <li>{{value}}</li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <h5>Stilling</h5>
                        <div>
                          {{contact.position}}
                        </div>
                      </td>
                      <td>
                        <h5>Ansvar</h5>
                        <div>
                          {{contact.responsibility}}
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <h5>Afdeling</h5>
                        <div>
                          {{contact.department}}
                        </div>
                      </td>
                      <td>
                        <h5>Telefon</h5>
                        <div>
                          <ul template iterate="value in contact.telephoneNumberList">
                            <li>{{value}}</li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <h5>Relationer</h5>
                        <div>
                          {{contact.relations}}
                        </div>
                      </td>
                      <td>
                        <h5>Email</h5>
                        <div>
                          <ul template iterate="value in contact.emailAddressList">
                            <li>{{value}}</li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <h5>Info</h5>
                        <div>
                          {{contact.info}}
                        </div>
                      </td>
                      <td>
                        <h5>Backup</h5>
                        <div>
                          <ul template iterate="value in contact.backupList">
                            <li>{{value}}</li>
                          </ul>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>
              </template>
            </div>
          </div>
        </x-box-with-header>
      </template>

      <script type="application/dart" src="xcontactinfo.dart"></script>
    </element>
  </body>
</html>
